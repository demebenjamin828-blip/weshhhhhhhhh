<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examen Nouveau Testament üìñ</title>

<!-- Librairies -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<style>
:root{
  --primary:#27ae60;
  --success:#2ecc71;
  --error:#e74c3c;
  --soft:#eafaf1;
}

body{
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#f3fbf6,#d4efdf);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  margin:0;
}

.quiz-card{
  background:white;
  padding:40px;
  border-radius:20px;
  box-shadow:0 20px 50px rgba(0,0,0,0.15);
  width:90%;
  max-width:650px;
  animation:fadeIn .7s ease;
}

h2{color:var(--primary);text-align:center;margin-bottom:20px;}

.step{display:none;}
.step.active{display:block;animation:slide .4s ease;}

@keyframes slide{
  from{opacity:0;transform:translateX(20px);}
  to{opacity:1;transform:translateX(0);}
}

.q-block{
  margin-bottom:18px;
  padding:18px;
  border-radius:12px;
  border:1px solid #d4efdf;
  transition:.3s;
}
.q-block:hover{background:var(--soft);}

input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:2px solid #e2e8f0;
  font-size:15px;
}

.btn-nav{
  width:100%;
  padding:14px;
  background:var(--primary);
  color:white;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  transition:.3s;
}
.btn-nav:hover{transform:scale(1.02);}

.progress-container{
  width:100%;
  height:12px;
  background:#d4efdf;
  border-radius:10px;
  margin-bottom:15px;
}
.progress-bar{
  height:100%;
  width:0%;
  background:var(--primary);
  transition:.4s;
  border-radius:10px;
}

#timer{
  text-align:center;
  font-weight:bold;
  color:#555;
  margin-bottom:15px;
}

.tableau-result{
  width:100%;
  border-collapse:collapse;
  margin-top:25px;
}
.tableau-result th{
  background:var(--primary);
  color:white;
  padding:10px;
}
.tableau-result td{
  border:1px solid #ddd;
  padding:10px;
}

.commentaires{
  margin-top:20px;
  padding:15px;
  background:#f9fbfd;
  border-left:4px solid var(--primary);
}

.verse{
  margin-top:25px;
  text-align:center;
  font-style:italic;
  color:#666;
}
</style>
</head>

<body>

<div class="quiz-card">
<h2>Quiz Biblique üïäÔ∏è</h2>

<div class="progress-container">
<div class="progress-bar" id="progressBar"></div>
</div>

<div id="timer">‚è±Ô∏è Temps restant : 02:00</div>

<form id="quizForm">

<div class="step active" id="step0">
<label>Pr√©nom</label><input id="prenom" required><br><br>
<label>Nom</label><input id="nom" required><br><br>
<label>Email</label><input id="email" required><br><br>
<button type="button" class="btn-nav" onclick="nextStep(0)">Commencer</button>
</div>

<div class="step" id="step1">
<div class="q-block"><label>1. Ville de naissance de J√©sus ?</label><input id="q1"></div>
<div class="q-block"><label>2. Qui a reni√© J√©sus ?</label><input id="q2"></div>
<button type="button" class="btn-nav" onclick="nextStep(1)">Suivant</button>
</div>

<div class="step" id="step2">
<div class="q-block"><label>3. Dernier livre de la Bible ?</label><input id="q3"></div>
<div class="q-block"><label>4. Qui a baptis√© J√©sus ?</label><input id="q4"></div>
<button type="button" class="btn-nav" onclick="nextStep(2)">Suivant</button>
</div>

<div class="step" id="step3">
<div class="q-block"><label>5. Nombre d'√âvangiles ?</label><input id="q5"></div>
<div class="q-block"><label>6. Mer o√π J√©sus a march√© ?</label><input id="q6"></div>
<button type="button" class="btn-nav" onclick="nextStep(3)">Suivant</button>
</div>

<div class="step" id="step4">
<div class="q-block"><label>7. Auteur principal des √âp√Ætres ?</label><input id="q7"></div>
<div class="q-block"><label>8. Miracle de Cana ?</label><input id="q8"></div>
<button type="button" class="btn-nav" onclick="nextStep(4)">Suivant</button>
</div>

<div class="step" id="step5">
<div class="q-block"><label>9. Ap√¥tre collecteur d'imp√¥ts ?</label><input id="q9"></div>
<div class="q-block"><label>10. Qui a trahi J√©sus ?</label><input id="q10"></div>
<button type="submit" class="btn-nav">Valider</button>
</div>

</form>

<div id="resultat"></div>
</div>

<script>
// Progression
function nextStep(n){
document.getElementById('step'+n).classList.remove('active');
document.getElementById('step'+(n+1)).classList.add('active');
document.getElementById('progressBar').style.width=((n+1)/5*100)+"%";
}

// Chronom√®tre 2 minutes
let time=120;
const timer=setInterval(()=>{
time--;
let m=Math.floor(time/60);
let s=time%60;
document.getElementById("timer").textContent=
`‚è±Ô∏è Temps restant : ${m}:${s<10?"0":""}${s}`;
if(time<=0){clearInterval(timer);alert("Temps √©coul√© !");}
},1000);

// Correction
const answers={
q1:"bethleem",q2:"pierre",q3:"apocalypse",q4:"jean baptiste",
q5:"4",q6:"galilee",q7:"paul",q8:"vin",q9:"matthieu",q10:"judas"
};

document.getElementById("quizForm").addEventListener("submit",e=>{
e.preventDefault();
clearInterval(timer);

let score=0;
let tableau="";

for(let i=1;i<=10;i++){
let rep=(document.getElementById("q"+i).value||"").toLowerCase();
let ok=rep.includes(answers["q"+i]);
if(ok)score++;

tableau+=`
<tr>
<td>Q${i}</td>
<td>${rep||"-"}</td>
<td>${ok?"‚úÖ":"‚ùå"}</td>
</tr>`;
}

document.getElementById("resultat").innerHTML=`
<h3>Score : ${score}/10</h3>

<table class="tableau-result">
<tr><th>Question</th><th>Ta r√©ponse</th><th>R√©sultat</th></tr>
${tableau}
</table>

<div class="commentaires">
üìñ Dieu nous enseigne par Sa Parole pour grandir dans la v√©rit√©.
</div>

<div class="verse">
"Ta parole est une lampe √† mes pieds." ‚Äì Psaume 119:105
</div>`;
});
</script>

</body>
</html>
