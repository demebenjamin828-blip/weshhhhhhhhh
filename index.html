<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Nouveau Testament üìñ</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <style>
        /* --- VARIABLES & BASE --- */
        :root {
            --primary-biblical: #1b3d1a;
            --gold: #d4af37;
            --soft-bg: #f3fbf6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f3fbf6, #d4efdf);
            min-height: 100vh;
            margin: 0;
            color: #2c3e50;
        }

        /* --- ACCUEIL PREMIUM --- */
        #premium-welcome {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1b3d1a 0%, #27ae60 100%);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.8s cubic-bezier(0.77, 0, 0.175, 1);
            color: white;
            text-align: center;
        }
        .hide-welcome { transform: translateY(-100%); }

        .bible-frame {
            width: 120px; height: 120px;
            border: 2px solid var(--gold);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            margin: 0 auto 30px;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
            animation: pulseGold 2s infinite;
            background: rgba(255,255,255,0.1);
        }

        /* --- CARTE QUIZ BOOTSTRAP OPTIMIS√âE --- */
        .quiz-container {
            margin-top: 50px;
            margin-bottom: 50px;
        }
        .quiz-card {
            background: white;
            border: none;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
            display: none; /* R√©v√©l√© apr√®s accueil */
        }
        .card-header-biblical {
            background: var(--primary-biblical);
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 4px solid var(--gold);
        }

        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.5s ease; }

        .q-block {
            background: #fdfdfd;
            border: 1px solid #eee;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            transition: 0.3s;
        }
        .q-block:hover { border-color: var(--gold); background: #fff; }

        /* --- BOUTONS --- */
        .btn-gold {
            background: var(--gold);
            color: white;
            border: none;
            font-weight: 600;
        }
        .btn-gold:hover { background: #b8962d; color: white; }

        .option-btn {
            width: 100%;
            text-align: left;
            margin-bottom: 10px;
            border-radius: 10px;
            transition: 0.2s;
        }

        #timer {
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--primary-biblical);
        }

        @keyframes pulseGold {
            0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(212, 175, 55, 0.5); }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

<div id="premium-welcome">
    <div class="container welcome-content">
        <div class="bible-frame"><span style="font-size: 60px;">üìñ</span></div>
        <h1 class="display-4 fw-bold mb-3">Examen du Nouveau Testament</h1>
        <p class="lead mb-5 opacity-75">Plongez dans les √âcritures et testez vos connaissances spirituelles.</p>
        
        <div class="row justify-content-center mb-5">
            <div class="col-4 col-md-2"><h4>10</h4><small class="text-uppercase">Questions</small></div>
            <div class="col-4 col-md-2"><h4>2</h4><small class="text-uppercase">Niveaux</small></div>
            <div class="col-4 col-md-2"><h4>120s</h4><small class="text-uppercase">Chrono</small></div>
        </div>

        <button class="btn btn-light btn-lg rounded-pill px-5 fw-bold" onclick="launchQuiz()">
            Commencer le Voyage üöÄ
        </button>
    </div>
</div>

<div class="container quiz-container">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card quiz-card" id="quizContainer">
                <div class="card-header-biblical">
                    <h2 class="h4 mb-0">Quiz Biblique üïäÔ∏è</h2>
                </div>
                
                <div class="card-body p-4 p-md-5">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div id="timer" class="badge bg-light text-dark p-2">‚è±Ô∏è 02:00</div>
                        <div class="w-50">
                            <div class="progress" style="height: 10px;">
                                <div class="progress-bar bg-success" id="progressBar" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <form id="quizForm">
                        <div class="step active" id="step0">
                            <div class="q-block">
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Pr√©nom</label>
                                    <input type="text" class="form-control form-control-lg" id="prenom" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Email</label>
                                    <input type="email" class="form-control form-control-lg" id="email" required>
                                </div>
                                <label class="form-label fw-bold">Difficult√© :</label>
                                <div class="row g-2">
                                    <div class="col-6">
                                        <button type="button" class="btn btn-outline-success w-100 p-3" onclick="setLevel('Interm√©diaire', this)">üü¢ QCM</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn btn-outline-danger w-100 p-3" onclick="setLevel('Difficile', this)">üî¥ Texte</button>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-success btn-lg w-100" onclick="startQuiz()">C'est parti ! üöÄ</button>
                        </div>

                        <div class="step" id="step1">
                            <div class="q-block"><label class="fw-bold mb-2">1. Ville de naissance de J√©sus ?</label><input class="form-control" id="q1"></div>
                            <div class="q-block"><label class="fw-bold mb-2">2. Qui a reni√© J√©sus ?</label><input class="form-control" id="q2"></div>
                            <button type="button" class="btn btn-success btn-lg w-100" onclick="nextStep(1)">Suivant ‚Üí</button>
                        </div>
                        
                        <div class="step" id="step2">
                            <div class="q-block"><label class="fw-bold mb-2">3. Dernier livre de la Bible ?</label><input class="form-control" id="q3"></div>
                            <div class="q-block"><label class="fw-bold mb-2">4. Qui a baptis√© J√©sus ?</label><input class="form-control" id="q4"></div>
                            <button type="button" class="btn btn-success btn-lg w-100" onclick="nextStep(2)">Suivant ‚Üí</button>
                        </div>

                        <div class="step" id="step5">
                            <div class="q-block"><label class="fw-bold mb-2">9. Ap√¥tre collecteur d'imp√¥ts ?</label><input class="form-control" id="q9"></div>
                            <div class="q-block"><label class="fw-bold mb-2">10. Qui a trahi J√©sus ?</label><input class="form-control" id="q10"></div>
                            <button type="submit" class="btn btn-primary btn-lg w-100">Valider l'examen ‚úÖ</button>
                        </div>
                    </form>

                    <div id="res-summary" class="mt-4"></div>
                    <div id="recap-table" class="mt-4 shadow-sm" style="display:none;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Garde toute ta logique JS originale ici
    // Seule la fonction launchQuiz change un peu pour Bootstrap
    function launchQuiz() {
        document.getElementById('premium-welcome').classList.add('hide-welcome');
        setTimeout(() => {
            document.getElementById('quizContainer').style.display = 'block';
        }, 600);
    }

    // Le reste de tes fonctions (startQuiz, setLevel, nextStep, etc.) reste identique.
    // Pense juste √† ajouter les classes Bootstrap 'btn btn-outline-secondary' aux boutons QCM g√©n√©r√©s en JS.
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
