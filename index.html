<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examen Nouveau Testament ğŸ“–</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
/* --- DESIGN PARADISIAQUE --- */
:root {
  --success:#27ae60;
  --error:#e74c3c;
  --primary:#2d5a27; /* Vert profond biblique */
  --gold:#d4af37;    /* Or divin */
  --soft:#f0f7f2;
  --text:#2c3e50;
  --glass: rgba(255, 255, 255, 0.95);
}

body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at top, #ffffff 0%, #d4efdf 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
  color: var(--text);
  padding: 15px;
  overflow-x: hidden;
}

/* Effet de texture discrÃ¨te en arriÃ¨re-plan */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: url('https://www.transparenttextures.com/patterns/pinstriped-suit.png');
  opacity: 0.1;
  z-index: -1;
}

/* --- PAGE ACCUEIL --- */
#welcome-page {
    position: fixed;
    inset: 0;
    background: linear-gradient(135deg, #1b3d1a, #27ae60);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1);
}

.welcome-content h1 {
    font-family: 'Cinzel', serif;
    font-size: 2.5rem;
    letter-spacing: 4px;
    text-shadow: 0 4px 15px rgba(0,0,0,0.4);
}

.bible-icon {
    font-size: 100px;
    margin: 20px 0;
    filter: drop-shadow(0 0 20px var(--gold));
    animation: float 4s ease-in-out infinite;
}

.start-btn {
    background: white;
    color: var(--primary);
    border: none;
    padding: 18px 45px;
    font-size: 1.1rem;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    transition: 0.3s;
}
.start-btn:hover { transform: scale(1.05); filter: brightness(1.1); }

/* --- CARTE DU QUIZ --- */
.quiz-card {
  background: var(--glass);
  backdrop-filter: blur(10px);
  padding: 40px;
  border-radius: 30px;
  box-shadow: 0 25px 60px rgba(0,0,0,0.1);
  width: 100%;
  max-width: 650px;
  border: 1px solid rgba(255,255,255,0.7);
  animation: slideIn 0.8s ease-out;
}

h2 { font-family: 'Cinzel', serif; font-weight: 700; color: var(--primary); }

.progress-container { height: 8px; background: #e0edec; border-radius: 10px; margin-bottom: 25px; }
.progress-bar { height: 100%; background: linear-gradient(90deg, var(--gold), #f1c40f); border-radius: 10px; transition: 0.6s ease; }

/* Blocs Questions */
.q-block {
  background: white;
  border: 1px solid #eef2f1;
  border-left: 5px solid var(--gold);
  padding: 25px;
  border-radius: 15px;
  margin-bottom: 20px;
  transition: 0.3s;
  box-shadow: 0 5px 15px rgba(0,0,0,0.02);
}
.q-block:hover { transform: translateY(-3px); border-color: var(--primary); box-shadow: 0 10px 25px rgba(0,0,0,0.05); }

input {
  border: 2px solid #edf2f7;
  border-radius: 12px;
  padding: 15px;
  font-size: 1rem;
  transition: 0.3s;
}
input:focus { border-color: var(--gold); box-shadow: 0 0 12px rgba(212, 175, 55, 0.2); outline: none; }

/* Boutons de Navigation */
.btn-nav {
  background: linear-gradient(135deg, var(--primary), #1b3d1a);
  border-radius: 50px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 18px;
  box-shadow: 0 8px 20px rgba(39,174,96,0.3);
}

.level-btn, .option-btn {
  background: #f8fafc;
  border: 2px solid #edf2f7;
  border-radius: 12px;
  text-align: center;
  font-weight: 600;
}
.level-btn.selected, .option-btn.selected {
  background: var(--primary);
  color: white;
  border-color: var(--gold);
}

#timer {
  background: var(--soft);
  color: var(--primary);
  border-radius: 12px;
  padding: 12px;
  font-weight: 700;
}

.timer-danger { background: #fff5f5; color: var(--error); animation: shake 0.5s infinite; }

/* Animations */
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
.step { display: none; }
.step.active { display: block; animation: fadeInRight 0.6s ease; }
@keyframes fadeInRight { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }

/* RÃ©sultats */
.score-anim { font-family: 'Cinzel', serif; font-size: 60px; color: var(--gold); font-weight: bold; }
.verse { border-top: 2px solid var(--gold); padding-top: 25px; font-style: italic; color: var(--primary); }

@media (max-width: 500px) { .quiz-card { padding: 25px; } }
</style>
</head>
<body>

<div id="welcome-page">
Â  Â  <div class="welcome-content" style="text-align:center;">
Â  Â  Â  Â  <h1 class="fade-in-down">HÃ‰RITAGE SPIRITUEL ğŸ•Šï¸</h1>
Â  Â  Â  Â  <p class="fade-in-up" style="font-size: 1.2rem; opacity: 0.9;">Explorez la sagesse du Nouveau Testament</p>
Â  Â  Â  Â  <div class="bible-icon">ğŸ“–</div>
Â  Â  Â  Â  <button class="start-btn" onclick="hideWelcome()">Commencer le Voyage</button>
Â  Â  </div>
</div>

<audio id="beepSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>
<audio id="finishSound" src="https://assets.mixkit.co/active_storage/sfx/2866/2866-preview.mp3"></audio>

<div class="quiz-card">
Â  <h2 style="text-align:center;">Examen Biblique</h2>

Â  <div class="progress-container">
Â  Â  <div class="progress-bar" id="progressBar"></div>
Â  </div>
Â Â 
Â  <div id="timer">â±ï¸ Temps restant : 02:00</div>

Â  <form id="quizForm">
Â  Â  <div class="step active" id="step0">
Â  Â  Â  <div class="q-block">
Â  Â  Â  Â  <label>PrÃ©nom du candidat</label><input type="text" id="prenom" required><br><br>
Â  Â  Â  Â  <label>Nom de famille</label><input type="text" id="nom" required><br><br>
Â  Â  Â  Â  <label>Email professionnel/personnel</label><input type="email" id="email" required><br><br>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <label>Choisissez votre niveau :</label>
Â  Â  Â  Â  <div class="level-container">
Â  Â  Â  Â  Â  Â  <button type="button" class="level-btn" onclick="setLevel('IntermÃ©diaire', this)">ğŸŒ¿ IntermÃ©diaire<br><small>Choix Multiples</small></button>
Â  Â  Â  Â  Â  Â  <button type="button" class="level-btn" onclick="setLevel('Difficile', this)">ğŸ•Šï¸ Difficile<br><small>Ã‰criture Libre</small></button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <button type="button" class="btn-nav" onclick="startQuiz()">Ouvrir les Ã‰critures ğŸš€</button>
Â  Â  </div>

Â  Â  Â  Â  <div class="step" id="step1">
Â  Â  Â  <div class="q-block" id="block1"><label>1. Ville de naissance de JÃ©sus ?</label><input id="q1"><div class="feedback" id="f1"></div></div>
Â  Â  Â  <div class="q-block" id="block2"><label>2. Qui a reniÃ© JÃ©sus ?</label><input id="q2"><div class="feedback" id="f2"></div></div>
Â  Â  Â  <button type="button" class="btn-nav" onclick="nextStep(1)">Suivant â†’</button>
Â  Â  </div>

Â  Â  <div class="step" id="step2">
Â  Â  Â  <div class="q-block" id="block3"><label>3. Dernier livre de la Bible ?</label><input id="q3"><div class="feedback" id="f3"></div></div>
Â  Â  Â  <div class="q-block" id="block4"><label>4. Qui a baptisÃ© JÃ©sus ?</label><input id="q4"><div class="feedback" id="f4"></div></div>
Â  Â  Â  <button type="button" class="btn-nav" onclick="nextStep(2)">Suivant â†’</button>
Â  Â  Â  <button type="button" class="btn-back" onclick="prevStep(2)">â† Retour</button>
Â  Â  </div>

Â  Â  <div class="step" id="step3">
Â  Â  Â  <div class="q-block" id="block5"><label>5. Nombre d'Ã‰vangiles ?</label><input id="q5"><div class="feedback" id="f5"></div></div>
Â  Â  Â  <div class="q-block" id="block6"><label>6. Mer oÃ¹ JÃ©sus a marchÃ© ?</label><input id="q6"><div class="feedback" id="f6"></div></div>
Â  Â  Â  <button type="button" class="btn-nav" onclick="nextStep(3)">Suivant â†’</button>
Â  Â  Â  <button type="button" class="btn-back" onclick="prevStep(3)">â† Retour</button>
Â  Â  </div>

Â  Â  <div class="step" id="step4">
Â  Â  Â  <div class="q-block" id="block7"><label>7. Auteur principal des Ã‰pÃ®tres ?</label><input id="q7"><div class="feedback" id="f7"></div></div>
Â  Â  Â  <div class="q-block" id="block8"><label>8. Miracle de Cana ?</label><input id="q8"><div class="feedback" id="f8"></div></div>
Â  Â  Â  <button type="button" class="btn-nav" onclick="nextStep(4)">DerniÃ¨re Ã©tape â†’</button>
Â  Â  Â  <button type="button" class="btn-back" onclick="prevStep(4)">â† Retour</button>
Â  Â  </div>

Â  Â  <div class="step" id="step5">
Â  Â  Â  <div class="q-block" id="block9"><label>9. ApÃ´tre collecteur d'impÃ´ts ?</label><input id="q9"><div class="feedback" id="f9"></div></div>
Â  Â  Â  <div class="q-block" id="block10"><label>10. Qui a trahi JÃ©sus ?</label><input id="q10"><div class="feedback" id="f10"></div></div>
Â  Â  Â  <button type="submit" class="btn-nav" style="background:var(--gold); border:none;">Valider âœ…</button>
Â  Â  Â  <button type="button" class="btn-back" onclick="prevStep(5)">â† Retour</button>
Â  Â  </div>
Â  </form>

Â  <div id="res-summary"></div>
Â  <div id="recap-table" style="display:none;"></div>
Â  <button onclick="location.reload()" id="btnReset" class="btn-nav" style="display:none; background:#7f8c8d; margin-top:20px;">Recommencer</button>
</div>

<script>
// TON JAVASCRIPT RESTE EXACTEMENT LE MÃŠME 
// J'ai juste ajoutÃ© la fermeture stylisÃ©e de la page d'accueil.
function hideWelcome() {
Â  Â  document.getElementById('welcome-page').style.transform = 'translateY(-100%)';
}

/* ... Reste de ta logique (Supabase, EmailJS, startQuiz, nextStep, submit...) ... */
// (Recolle ici la suite de ton script original, il fonctionnera parfaitement avec ce design)
</script>
</body>
</html>
